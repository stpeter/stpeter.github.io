<html>
<head>
<title>One Small Voice: XMPP Layering</title>
<link rel="stylesheet" type="text/css" href="/stpeter.css">
<link rel="alternate" type="application/atom+xml" href="http://stpeter.im/atom.xml">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width">
<meta name="DC.Creator" content="Peter Saint-Andre">
<meta name="DC.Rights" content="http://creativecommons.org/publicdomain/zero/1.0/">
<meta name="DC.Title" content="XMPP Layering">
<meta name="DC.Date" content="2007-08-09">
</head>
<body>
<h2>XMPP Layering</h2>
<h3>2007-08-09</h3>
<p>This is a bit of a geeky post, but it captures something I've thought about as I've been working on <a href="http://www.xmpp.org/internet-drafts/draft-saintandre-rfc3920bis-03.html">rfc3920bis</a> and <a href="http://www.xmpp.org/internet-drafts/draft-saintandre-rfc3921bis-03.html">rfc3921bis</a> of late: namely, that there are several layers in <a href="http://www.xmpp.org/">XMPP</a> technologies. In particular:</p>
<ol>
<li>XML streams</li>
<li>The jabber:client (and jabber:server) namespaces, which define the core presence, messaging, and request-response services.</li>
<li>Various XMPP extensions, some of which (e.g., <a href="http://www.xmpp.org/extensions/xep-0060.html">pubsub</a>) provide infrastructure for even further extensions.</li>
</ol>
<p>In <a href="http://www.ietf.org/rfc/rfc3920.txt">RFC 3920</a> ("XMPP Core") we defined the presence, messaging, and request-response services, but the XML schemas for that functionality were specified in <a href="http://www.ietf.org/rfc3921.txt">RFC 3921</a> ("XMPP IM") because there are some IM-specific semantics defined in those schemas. Now I'm wondering whether it makes more sense to define only XML streams (and associated features like TLS for channel encryption and SASL for authentication) in rfc3920bis and to define everything related to the jabber:client and jabber:server namespaces in rfc3921bis.</p>
<p>(One reason for doing so would be to make it clear that people could use XML streams with default namespaces other than jabber:client and jabber:server -- e.g., someone could define a specialized default namespace for synchronization of Atom feeds or SVG images or somesuch.)</p>
<p>The major documentation challenge here is that resource binding in a client-to-server stream uses the &lt;iq/&gt; element, which is qualified by the jabber:client namespace. If resource binding stays in rfc3920bis, then we would require a normative reference from rfc3920bis to rfc3921bis. If resource binding moves to rfc3921bis, then rfc3920bis might lose the distinction between c2s and s2s streams. But I think that's surmountable</p>
<p>Whether it's worth the effort to refactor the specs in this way is open to argument. But given that I expect rfc3920bis and rfc3921bis to define XMPP for a long time to come, it might make sense for the layering to be as clear as possible.</p>
<hr>
<p><a href="/">Peter Saint-Andre</a> &gt; <a href="/journal/">Journal</a></p>
</body>
</html>
